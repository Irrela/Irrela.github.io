---
title: RMI & RPC
categories: Eightlegged
---

### RPC
RPC（Remote Procedure Call Protocol）远程过程调用协议，它是一种通过网络从远程计算机程序上请求服务，而不需要了解底层网络技术的协议。RPC不依赖于具体的网络传输协议，tcp、udp等都可以。

由于存在各式各样的变换和细节差异，相应的rpc也派生出了各式远程过程通信协议。RPC是跨语言的通信标准，SUN和微软都有其实现，比如RMI可以被看作SUN对RPC的Java版本( 实现)，而微软的DCOM就是建立在ORPC协议之上。

**一言以蔽之，RPC是协议，而无论是SUN的RMI还是微软的DCOM都是对该协议的不同实现，二者都为编程人员提供了应用PRC技术的程序接口（API）。**

RPC协议的实现框架比如RMI等应该**是通过Socket接口来使用TCP/IP协议**来实现网络通信的。

Socket是应用层与TCP/IP协议族通信的中间软件抽象层，它是一组接口。在设计模式中，Socket其实就是一个门面模式（Facade），它把复杂的TCP/IP协议族隐藏在Socket接口后面，对用户来说，一组简单的接口就是全部，让Socket去组织数据，以符合指定的协议。

### RPC过程
1. 客户端调用客户端存根(stub)。该调用是本地过程调用，其参数以常规方式推送到堆栈上。
2. 客户端存根将参数打包到消息中，并进行系统调用以发送该消息。 将参数打包称为封送处理(marshalling)。
3. 客户端的本地操作系统将消息从客户端计算机发送到服务器计算机。
4. 服务器机器上的本地操作系统将传入的数据包传递到服务器存根。
6. 服务器存根从消息中解包参数。 将参数解包称为解组。
7. 最后，服务器存根调用服务器过程。 回复在相反的方向上跟踪相同的步骤。

### RMI
Java远程方法调用（Java RMI）是执行远程方法调用的Java API，远程方法调用是远程过程调用（RPC）的面向对象等效项，并支持可序列化 Java类的直接传输和分布式垃圾回收。

RMI使你能够调用在另外一个JVM上运行的对象的方法。当你使用RMI调用一个远程方法时，这个方法的参数被打包（装配）成一个比特流，并且穿越整个网络到达远程JVM，在那里它会被解包（分解）并传递给远程方法。

#### structure
Client <-> Stub <-> Network <-> Skeleton <-> Server